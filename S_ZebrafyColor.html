<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>S_ZebraFyColor Simulation</title>
<style>
  body {
    margin: 0;
    background: black;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: white;
    font-family: Arial, sans-serif;
  }
  canvas {
    margin-top: 20px;
    border: 4px solid white;
  }
  .controls {
    margin-top: 10px;
  }
  input[type=range] {
    width: 200px;
    margin: 0 10px;
  }
</style>
</head>
<body>

<h1>S_ZebraFyColor Simulation</h1>
<input type="file" id="videoInput" accept="video/*"><br>
<canvas id="canvas" width="640" height="360"></canvas>
<div class="controls">
  Brightness Threshold: <input type="range" id="threshold" min="0" max="255" value="128">
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const videoInput = document.getElementById('videoInput');
const thresholdSlider = document.getElementById('threshold');

const video = document.createElement('video');
video.autoplay = true;
video.loop = true;
video.muted = true;

videoInput.onchange = e => {
  const file = e.target.files[0];
  if(file) video.src = URL.createObjectURL(file);
};

function drawZebra() {
  if(video.readyState >= 2) {
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
    const imageData = ctx.getImageData(0,0,canvas.width, canvas.height);
    const data = imageData.data;
    const threshold = parseInt(thresholdSlider.value);

    for(let i=0; i<data.length; i+=4){
      const r = data[i];
      const g = data[i+1];
      const b = data[i+2];
      const brightness = 0.299*r + 0.587*g + 0.114*b;
      
      if(brightness > threshold){
        // Zebra stripe pattern: alternate horizontal lines
        const y = Math.floor(i / 4 / canvas.width);
        if(y % 2 === 0){
          data[i] = 255;   // Red
          data[i+1] = 255; // Green
          data[i+2] = 255; // Blue
        } else {
          data[i] = r;
          data[i+1] = g;
          data[i+2] = b;
        }
      }
    }
    ctx.putImageData(imageData, 0, 0);
  }
  requestAnimationFrame(drawZebra);
}

drawZebra();
</script>

</body>
</html>
